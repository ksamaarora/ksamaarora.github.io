---
layout: post
title:  "Designing and Implementing Data Science Solution on Azure (DP-100)"
date:   2024-05-08 09:29:20 +0700
tags:
  - cloud
categories: jekyll update
usemathjax: true
---

> ### <a href="/posts_blogs/blogs_dp100/datasciencelifecycle" style="color:skyblue;" rel="noopener">Data Science Life Cycle & Responsible AI Guidelines</a>

> ### Azure Machine Learning Model 

[![Screenshot-2024-05-12-at-3-53-44-PM.png](https://i.postimg.cc/mkC3Mbcq/Screenshot-2024-05-12-at-3-53-44-PM.png)](https://postimg.cc/p5VnMMJY)

> ### Resources and Assets 

[![Screenshot-2024-05-12-at-5-50-16-PM.png](https://i.postimg.cc/N0DZPCqJ/Screenshot-2024-05-12-at-5-50-16-PM.png)](https://postimg.cc/7CCB5VL0)

**Resources** provide the **infrastructure and services** to build solutions, and **assets** are the **products or content created or configured** by data scientists and data engineers.
Examples of resources include compute and datastore, and examples of assets are machine learning models and data assets.

- **Application Insights, Azure Key Vault, and Azure Storage account** are resources are **provisioned by default** when you **deploy** an Azure Machine Learning **workspace**. 

  - **Application Insights** is an extension of Azure Monitor and provides performance monitoring for several types of applications, including machine learning solutions. 
  - The **key vault** is used to store secrets required to connect to data and other resources and assets. 
  - The **storage account** is used to store machine learning notebooks and logs related to machine learning jobs and other activities.

> ### Introducing Essential of Python SDK

The basic pattern used in managing Azure Machine Learning resources using the Azure Machine Learning SDK for Python starts with **importing any required libraries and classes**, then **defining the attributes and configuration** of the resource, and then executing a **create or update method**.

- **Authenticate ML Client**: From the Azure Machine Learning SDK for Python, MLClient is used to connect to the workspace. It is also used to execute methods that create or update resources, such as datastores and compute.
```python
from azure.ai.ml import MLClient
from azure.identity import DefaultAzureCredential
ml_client = MLClient(
    DefaultAzureCredential(), subscription_id, resource_group, workspace
)
```

- **Create New Machine Learning Workspace**
```python
from azureml.core import Workspace
my_ws = Workspace(
    name="another-workspace",
    location="westus",
    display_name="another-workspace for you to view", 
    description="This is just an example"
)
ml_client.workspaces.begin_create(my_ws)
```

- **Create a new Compute Targets**: Compute Targets are for production workloads and Compute Instances are used for powering notebooks 
```python
from azureml.core import ComputeTarget, AmlCompute
my_little_cluster = AmlCompute(
    name="basic-cluster",
    type="amlcompute",
    size="STANDARD_DS3_v2",
    location="westus",
    min_instances=0,
    max_instances=2,
    idle_time_before_scale_down=60,
)
ml_client.begin_create_or_update (my_little_cluster)
```

- **Create a new Datastore**
```python
from azureml.core import Datastore, AzureBlobDatastore 
a_blob_store= AzureBlobDatastore(
    name="my_blob_example",
    description="Datastore pointing to a blob container.",
    account_name="myexistingblobstore", 
    container_name="stuffandsuch-container",
    credentials={
        "account_key": "XXXXYYYXXXzzzYYYZZZxxx"
    },
)
ml_client.create_or_update(blob_datastore1)
```

- **Create List Environments**
```python
envs = ml_client.environments.list()
for env in envs:
    print(env.name)
```

- **Create a Custom Environment** 
```python
from azureml.core import Environment
my_env = Environment(
    image="pytorch/pytorch: latest", # base image to use
    name="docker-image-example", # name of the model
    description="Environment created from a Docker image.",
)
ml_client.environments.create_or_update(my_env) # use the MLClient to connect to workspace and create/register the environment
```

> ### Compute

| **Compute Type** | **Description** |
|---|---|
| **Compute Instances** | The engine that powers your machine learning experiments. Used for everyday starting builds. Just like a Virtual Machine. |
| **Compute Clusters** | Think of compute clusters as a bunch of workers. We can scale our work using compute clusters as we can increase the number of nodes (workers) used for a particular task/ workload. Used for large runs. |
| | - **Dedicated Cluster:** These are just ready when you are - more expensive |
| | - **Low-Priority Cluster:** These systems are going to be ready when you are, probably. Low priority clusters may be accessed by multiple users thus you may get access to it but just in a few minutes or so - less expensive |
| **Inference Cluster/Kubernetes Cluster** | We will be using Azure Kubernetes or AksCompute Cluster. This will be useful for Production environments, Multi-cloud environments, On-premises |
| **Attached Compute** | "Catch-All". Used for Specialized needs. This is useful for HDInsight cluster, Virtual Machine, Databricks cluster, Data Lake Analytics |




















